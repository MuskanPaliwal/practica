"use strict";(self.webpackChunkpractica_docs=self.webpackChunkpractica_docs||[]).push([[337],{3905:function(t,n,l){l.d(n,{Zo:function(){return s},kt:function(){return p}});var e=l(7294);function r(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}function o(t,n){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),l.push.apply(l,e)}return l}function a(t){for(var n=1;n<arguments.length;n++){var l=null!=arguments[n]?arguments[n]:{};n%2?o(Object(l),!0).forEach((function(n){r(t,n,l[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):o(Object(l)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(l,n))}))}return t}function u(t,n){if(null==t)return{};var l,e,r=function(t,n){if(null==t)return{};var l,e,r={},o=Object.keys(t);for(e=0;e<o.length;e++)l=o[e],n.indexOf(l)>=0||(r[l]=t[l]);return r}(t,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(e=0;e<o.length;e++)l=o[e],n.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(t,l)&&(r[l]=t[l])}return r}var i=e.createContext({}),c=function(t){var n=e.useContext(i),l=n;return t&&(l="function"==typeof t?t(n):a(a({},n),t)),l},s=function(t){var n=c(t.components);return e.createElement(i.Provider,{value:n},t.children)},k={inlineCode:"code",wrapper:function(t){var n=t.children;return e.createElement(e.Fragment,{},n)}},d=e.forwardRef((function(t,n){var l=t.components,r=t.mdxType,o=t.originalType,i=t.parentName,s=u(t,["components","mdxType","originalType","parentName"]),d=c(l),p=r,b=d["".concat(i,".").concat(p)]||d[p]||k[p]||o;return l?e.createElement(b,a(a({ref:n},s),{},{components:l})):e.createElement(b,a({ref:n},s))}));function p(t,n){var l=arguments,r=n&&n.mdxType;if("string"==typeof t||r){var o=l.length,a=new Array(o);a[0]=d;var u={};for(var i in n)hasOwnProperty.call(n,i)&&(u[i]=n[i]);u.originalType=t,u.mdxType="string"==typeof t?t:r,a[1]=u;for(var c=2;c<o;c++)a[c]=l[c];return e.createElement.apply(null,a)}return e.createElement.apply(null,l)}d.displayName="MDXCreateElement"},1079:function(t,n,l){l.r(n),l.d(n,{assets:function(){return s},contentTitle:function(){return i},default:function(){return p},frontMatter:function(){return u},metadata:function(){return c},toc:function(){return k}});var e=l(7462),r=l(3366),o=(l(7294),l(3905)),a=["components"],u={sidebar_position:2,sidebar_label:"Monorepo"},i="Decision: Choosing **Monorepo** approach and tooling",c={unversionedId:"decisions/monorepo",id:"decisions/monorepo",title:"Decision: Choosing **Monorepo** approach and tooling",description:"\ud83d\udcd4 What is it - Choosing the right Monorepo tool and features for the boilerplate",source:"@site/docs/decisions/monorepo.md",sourceDirName:"decisions",slug:"/decisions/monorepo",permalink:"/docs/decisions/monorepo",editUrl:"https://github.com/practicajs/practica/tree/main/docs/docs/decisions/monorepo.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,sidebar_label:"Monorepo"},sidebar:"tutorialSidebar",previous:{title:"Configuration Library",permalink:"/docs/decisions/configurationLibrary"},next:{title:"OpenAPI",permalink:"/docs/decisions/openapi"}},s={},k=[],d={toc:k};function p(t){var n=t.components,l=(0,r.Z)(t,a);return(0,o.kt)("wrapper",(0,e.Z)({},d,l,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"decision-choosing-monorepo-approach-and-tooling"},"Decision: Choosing ",(0,o.kt)("strong",{parentName:"h1"},"Monorepo")," approach and tooling"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\ud83d\udcd4 What is it")," - Choosing the right Monorepo tool and features for the boilerplate"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u23f0 Status")," - Open for discussions"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\ud83d\udcc1 Corresponding discussion")," - ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/practicajs/practica/issues/80"},"Here")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\ud83c\udfafBottom-line: our recommendation")," - TBD"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\ud83d\udcca Detailed comparison table")),(0,o.kt)("table",{width:"80%",valign:"top"},(0,o.kt)("tr",null,(0,o.kt)("td",null),(0,o.kt)("td",null,(0,o.kt)("h1",null,"nx")),(0,o.kt)("td",null,(0,o.kt)("h1",null,"Turborepo")),(0,o.kt)("td",null,(0,o.kt)("h1",null,"Lerna")),(0,o.kt)("td",null,(0,o.kt)("h1",null,"workspace (npm, yarn, pnpm)"))),(0,o.kt)("tr",null,(0,o.kt)("td",{colspan:"5",align:"center"},(0,o.kt)("h2",null,"Executive Summary"))),(0,o.kt)("tr",{valign:"top"},(0,o.kt)("td",null,(0,o.kt)("b",null,"Community and maintenance")),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Huge eco-system and commercial-grade maintenance"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Trending, commercial-grade maintenance"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/partial.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Not maintained anymore"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/almost-full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Solid")),(0,o.kt)("tr",{valign:"top"},(0,o.kt)("td",null,(0,o.kt)("b",null,"\u2757Encourage component autonomy")),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/partial.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Packages are highly coupled"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/almost-full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Workflow is coupled"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/almost-full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"npm link bypasses the SemVer"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Minor concern: shared NODE_MODULES on the root")),(0,o.kt)("tr",{valign:"top"},(0,o.kt)("td",null,(0,o.kt)("b",null,"Build speed")),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Smart inference and execution plan, shared depedencies, cache"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Smart inference and execution plan, shared depedencies, cache"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/partial.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Parallel tasks execution, copied dependencies"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/partial.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Shared depedencies")),(0,o.kt)("tr",{valign:"top"},(0,o.kt)("td",null,(0,o.kt)("b",null,"Standardization")),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/partial.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"Non standard Node.js stuff: One single root package.json by default, TS-paths for linking"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"An externous build layer"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"An externous build layer"),(0,o.kt)("td",null,(0,o.kt)("img",{src:"https://raw.githubusercontent.com/practicajs/practica/main/docs/static/img/docs/decisions/full.png"}),(0,o.kt)("br",null),(0,o.kt)("br",null),"An externous package centralizer")),(0,o.kt)("tr",null,(0,o.kt)("td",{class:"tg-ho3n",colspan:"5",align:"center"},(0,o.kt)("h2",null,"Tasks and build pipeline"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("b",null,"\u2757\ufe0fParallel task execution")),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes"),(0,o.kt)("td",null,(0,o.kt)("br",null),"No"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes* (Yarn & Pnpm)")),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("b",null,"Ignore missing commands/scripts")),(0,o.kt)("td",null,(0,o.kt)("br",null),"No"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes")),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("b",null,"\u2757\ufe0fIn-project cache")),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes"),(0,o.kt)("td",null,(0,o.kt)("br",null),"No"),(0,o.kt)("td",null,(0,o.kt)("br",null),"No")),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("b",null,"Visual dependency graph")),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Partially, via plugin"),(0,o.kt)("td",null,(0,o.kt)("br",null),"No")),(0,o.kt)("tr",null,(0,o.kt)("td",null,"\u2757\ufe0fRealize packages that are affected by a change"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes, both through package.json and code"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes, through package.json"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None")),(0,o.kt)("tr",null,(0,o.kt)("td",{class:"tg-ho3n",colspan:"5",align:"center"},(0,o.kt)("h2",null,"Linking packages"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Mechanism"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Via TypeScript paths and webpack"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Symlinks via the package manager"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Symlinks via the package manager"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Symlinks")),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Can opt-out?"),(0,o.kt)("td",null,(0,o.kt)("br",null),"No"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes")),(0,o.kt)("tr",null,(0,o.kt)("td",{class:"tg-ho3n",colspan:"5",align:"center"},(0,o.kt)("h2",null,"Hoisting"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Boost npm installs"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Root package.json and NODE_MODULES"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes via workspaces"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes via workspaces"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Yes via workspaces")),(0,o.kt)("tr",null,(0,o.kt)("td",{class:"tg-ho3n",colspan:"5",align:"center"},(0,o.kt)("h2",null,"Others"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Plugins"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None")),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Scaffold new component from a gallery"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None")),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Distributed task execution"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None")),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Detecting affected packages"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None")),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Create a new package to the repo"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Built it code genreation with useful templates"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None, 3rd party code generator can be used"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None, 3rd party code generator can be used"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None, 3rd party code generator can be used")),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Adapt changes in the monorepo tool"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported via nx migrate"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported via codemod"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None")),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Incremental builds"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None")),(0,o.kt)("tr",null,(0,o.kt)("td",null,"Cross-package modifications"),(0,o.kt)("td",null,(0,o.kt)("br",null),"Supported via nx generate"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"),(0,o.kt)("td",null,(0,o.kt)("br",null),"None"))))}p.isMDXComponent=!0}}]);